# 📖 小说大纲自动生成器（Book-RG）

> 一键把小说TXT变成清晰大纲 + 网页目录！

---

## 🌟 工具能做什么？

- 自动拆分小说章节（无需手动标记）
- 生成章节摘要和故事线梳理
- 创建可折叠的网页目录（手机电脑都能看）
- 保留原始小说内容不修改

> 适合：网络小说作者/编辑、文学爱好者、阅读社群运营

---

## 🛠️ 第一步：安装准备（只需做一次）

### ✅ 1. 下载本项目
1. 打开这个网站地址：[https://github.com/fangzhangmnm/BookRG](https://github.com/fangzhangmnm/BookRG)
   - [国内网盘链接](https://pan.xxx.com/s/xxxx) 待搬运 
2. 点击【下载ZIP】→ 解压到桌面（或其他方便的位置）

### ✅ 2. 安装Python运行环境
1. 访问[Python中文网](https://python.p2hp.com/)  
   （国内高速下载）
2. 下载 **Python 3.10+** 安装包（Windows选.exe，Mac选.pkg）
3. 安装时**务必勾选** `添加到PATH`（重要！）
4. 验证安装成功：
   - 按 `Win+R` 输入 `cmd` 回车
   - 输入命令：
     ```bash
     python --version
     ```
   - 显示版本号（如`Python 3.12.1`）即成功

### ✅ 3. 安装依赖库
1. 打开命令提示符（CMD）
2. 输入（根据实际路径调整）：
   ```bash
   cd 桌面\book-rg
   pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
   ```
   > 使用清华镜像加速下载

---

## 🔑 第二步：获取API密钥（通行证）

### ✅ 推荐使用DeepSeek（国产大模型）
1. 访问[DeepSeek官网](https://platform.deepseek.com/)
2. 微信扫码注册/登录
3. 点击右上角头像 →【API密钥】→【创建新密钥】
4. 复制显示的密钥（格式：`sk-xxxxxx`）

### ✅ 设置密钥到电脑
1. 桌面右键【此电脑】→【属性】
2. 点击【高级系统设置】→【环境变量】
3. 在"用户变量"区点击【新建】：
   - 变量名：`DEEPSEEK_API_KEY`
   - 变量值：粘贴复制的密钥
4. 重启电脑使设置生效

---

## 🚀 第三步：生成小说大纲

### ✅ 准备小说文件
1. 将小说TXT文件放入`book-rg`文件夹
2. **重要**：用记事本打开文件 →【另存为】→ 编码选择 **UTF-8**  
   （避免乱码问题）

### ✅ 一键运行分析
1. 在`book-rg`文件夹空白处：按住`Shift+右键` →【在此处打开命令窗口】
2. 输入命令（替换文件名）：
   ```bash
   python book_rg.py 你的小说.txt --model_1 deepseek-chat
   ```
   > 示例：`python book_rg.py 凡人修仙传.txt --model_1 deepseek-chat`

3. 等待处理完成（进度条显示状态）

---

## 📚 第四步：查看结果
处理完成后，在文件夹中会生成：
| 文件 | 用途 | 打开方式 |
|------|------|----------|
| `小说名.html` | **网页版大纲目录** | 双击用浏览器打开 |
| `小说名.json` | 结构化数据文件 | 普通用户可忽略 |
| `小说名_data` | 过程文件 | 可删除 |

> 网页版功能：  
> - 章节树形导航
> - 点击折叠/展开内容
> - 自动生成章节摘要

---

## ❓ 常见问题解答
Q1: 为什么提示"不是内部命令"？  
A: Python安装时未勾选`添加到PATH`，需卸载重装

---

## ❤️ 鸣谢

本工具基于：

* `batchfactory`（AI 批处理框架）
* `DeepSeek` 大模型平台